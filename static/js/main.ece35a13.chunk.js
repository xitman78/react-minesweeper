(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,n,t){e.exports=t(47)},44:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(26),i=t(6),l=t(51),o=(t(44),t(10)),c=t(11),u=t(15),s=t(13),d=t(16),m=t(2),p=t(3),f=t(49),h=t(50),w=t(52),g=t(53),v=t(18),b=t(12);function x(){var e=Object(m.a)(["\n  width: 60px;\n  height: 60px;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n\n  justify-content: center;\n\n  @media (max-width: 700px) {\n    width: 40px;\n    height: 40px;\n    border-radius: 8px;\n  }\n\n  margin: 3px;\n\n  background-color: ",";\n\n  &:hover {\n    background-color: ",";\n  }\n\n  transition: background-color 0.3s ease-out;\n"]);return x=function(){return e},e}function O(){var e=Object(m.a)(["\n  font-size: 1.8em;\n  user-select: none;\n"]);return O=function(){return e},e}var I=p.a.div(O()),k=Object(p.a)("div")(x(),function(e){return e.isOpen?"orange":"white"},function(e){return e.isOpen?"#ffb510":"#efefef"}),E=Object(i.b)(function(e,n){return e.rows[n.rowIndex][n.colIndex]},null)(function(e){var n={"data-type":"cell","data-row":e.rowIndex,"data-col":e.colIndex};return r.createElement(k,Object.assign({isMine:e.isMine,isOpen:e.isOpen},n),e.isOpen?r.createElement(r.Fragment,null,e.neighborMines?r.createElement(I,n,e.neighborMines):null,e.isMine?r.createElement(I,n,"\ud83d\udca3"):null):e.isMarked&&r.createElement(I,n,"\u2691"))});function y(){var e=Object(m.a)(["\n  display: flex;\n  flex-wrap: nowrap;\n"]);return y=function(){return e},e}var j=p.a.div(y()),M=Object(i.b)(function(e){return{rowLength:e.rows[0].length}},null)(function(e){var n=e.rowLength,t=e.rowIndex,a=new Array(n).fill(1).map(function(e,n){return n});return r.createElement(j,null,a.map(function(e){return r.createElement(E,{key:e,rowIndex:t,colIndex:e})}))});function S(){var e=Object(m.a)(["\n  margin-top: 20px;\n  padding: 10px;\n  border: none;\n  background-color: #66cc66;\n  font-size: 1.2em;\n  color: white;\n  cursor: pointer;\n  border-radius: 10px;\n  outline: none;\n  min-width: 100px;\n  &:hover {\n    background-color: #77dd77;\n  }\n"]);return S=function(){return e},e}var C=p.a.button(S()),A=Object(i.b)(function(e){return{gameState:e.gameState}},{newGame:function(){return{type:"newGame"}}})(function(e){var n=e.gameState,t=e.newGame;return r.createElement(C,{onClick:t},("game"===n||"new"===n)&&"New","win"===n&&"\ud83d\ude03","over"===n&&"\ud83d\ude35")}),T=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(u.a)(this,Object(s.a)(n).call(this,e))).interval=null,t.state={startedAt:0,endAt:0,isTimerStarted:!1},t.handleInterval=t.handleInterval.bind(Object(b.a)(t)),t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"componentDidUpdate",value:function(e,n){!n.isTimerStarted&&this.state.isTimerStarted?this.interval=setInterval(this.handleInterval,100):n.isTimerStarted&&!this.state.isTimerStarted&&this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"handleInterval",value:function(){this.setState({endAt:Date.now()})}},{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement("div",null,"Mines: ",this.props.minesLeft),r.createElement("div",null,((this.state.endAt-this.state.startedAt)/1e3).toFixed(1)))}}],[{key:"getDerivedStateFromProps",value:function(e,n){if("game"===e.gameState&&!n.isTimerStarted){var t=Date.now();return{startedAt:t,endAt:t,isTimerStarted:!0}}return"new"===e.gameState?{startedAt:0,endAt:0,isTimerStarted:!1}:"win"!==e.gameState&&"over"!==e.gameState||!n.isTimerStarted?null:{startedAt:n.startedAt,endAt:Date.now(),isTimerStarted:!1}}}]),n}(r.Component),_=Object(i.b)(function(e){return{gameState:e.gameState,minesLeft:e.mines-e.minesMarked}})(T);function D(){var e=Object(m.a)(["\n  margin-top: 20px;\n  border-radius: 30px;\n  padding: 20px;\n  text-align: center;\n  background-color: #ddd;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return D=function(){return e},e}var L=p.a.div(D());function N(e,n){if(e.target instanceof HTMLDivElement){var t=e.target.dataset;if(t&&"cell"===t.type){if(!t.row||!t.col)return;var r=parseInt(t.row,10),a=parseInt(t.col,10);if(isNaN(r)||isNaN(a))return void console.error("invalid cell index");e.preventDefault(),e.stopPropagation(),n(r,a)}}}var G=Object(i.b)(function(e){return{rowsCount:e.rows.length,rowLength:e.rows[0].length}},{cellClick:function(e,n){return{type:"click",rowIndex:e,cellIndex:n}},cellRightClick:function(e,n){return{type:"rightClick",rowIndex:e,cellIndex:n}},doubleClick:function(e,n){return{type:"doubleClick",rowIndex:e,cellIndex:n}}})(function(e){return r.createElement(L,{onClick:function(n){return N(n,e.cellClick)},onContextMenu:function(n){return N(n,e.cellRightClick)},onDoubleClick:function(n){return N(n,e.doubleClick)}},r.createElement(_,null),new Array(e.rowsCount).fill(0).map(function(n,t){return r.createElement(M,{key:t,rowIndex:t,rowLength:e.rowLength})}),r.createElement(A,null))});function F(){var e=Object(m.a)(["\n  margin-left: 40px;\n  font-size: 12px;\n  padding-top: 6px;\n"]);return F=function(){return e},e}function R(){var e=Object(m.a)(["\n  margin-left: 10px;\n  padding: 3px 10px;\n  font-size: 14px;\n  width: 50px;\n"]);return R=function(){return e},e}function z(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n"]);return z=function(){return e},e}function X(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n"]);return X=function(){return e},e}var U=p.a.div(X()),B=p.a.div(z()),H=p.a.input(R()),J=p.a.label(F()),P=function(e){function n(e){var t;return Object(o.a)(this,n),(t=Object(u.a)(this,Object(s.a)(n).call(this,e))).handleInputChange=t.handleInputChange.bind(Object(b.a)(t)),t.state={rows:10,cols:10,mines:10},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"handleInputChange",value:function(e){var n=this,t=parseInt(e.target.value,10);(isNaN(t)||t<=0)&&(t=1),this.setState(Object(v.a)({},e.target.name,t),function(){n.props.resetGame(n.state.rows,n.state.cols,n.state.mines)})}},{key:"render",value:function(){return r.createElement("div",null,r.createElement(B,null,r.createElement(J,{htmlFor:"rowsInput"},"Rows:"),r.createElement(H,{id:"rowsInput",type:"number",name:"rows",value:this.state.rows,onChange:this.handleInputChange}),r.createElement(J,{htmlFor:"colsInput"},"Columns:"),r.createElement(H,{id:"colsInput",type:"number",name:"cols",value:this.state.cols,onChange:this.handleInputChange}),r.createElement(J,{htmlFor:"colsInput"},"Mines:"),r.createElement(H,{id:"minesInput",type:"number",name:"mines",value:this.state.mines,onChange:this.handleInputChange})),r.createElement(U,null,r.createElement(G,null)))}}]),n}(r.Component),V=Object(i.b)(null,{resetGame:function(e,n,t){return{type:"reset",rows:e,columns:n,mines:t}}})(P);function q(){var e=Object(m.a)(["\n  max-width: 500px;\n  min-width: 400px;\n"]);return q=function(){return e},e}function K(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n"]);return K=function(){return e},e}var Q=p.a.div(K()),W=p.a.div(q()),Y=function(){return r.createElement(Q,null,r.createElement(W,null,r.createElement("h2",null,"Game Rules"),r.createElement("p",null,"This is web version of the classic ",r.createElement("a",{href:"https://en.wikipedia.org/wiki/Minesweeper_(video_game)",target:"_blank"},"minesweeper puzzle.")),r.createElement("p",null,"To win just mark all mines on the field!"),r.createElement("p",null,r.createElement("strong",null,"Left click")," - Open a cell"),r.createElement("p",null,r.createElement("strong",null,"Right click")," - Mark a cell as containing a mine"),r.createElement("p",null,r.createElement("strong",null,"Double click")," - Smart move. Double click an opened cell which has a number inside to open all closed neighbor cells. But it works only If the number in the cell corresponds to a number of marked mines in the neighborhood."),r.createElement("hr",null),"Source code on ",r.createElement("a",{href:"https://github.com/xitman78/react-minesweeper",target:"_blank"},"GitHub"),r.createElement("p",null,"Developed by ",r.createElement("a",{href:"https://alexander-cherepnya.netlify.com",target:"_blank"},"Alexander Cherepnya"))))};function Z(){var e=Object(m.a)(["\n  margin-right: 16px;\n"]);return Z=function(){return e},e}function $(){var e=Object(m.a)(["\n  display: flex;\n  margin-top: 20px;\n  justify-content: center;\n"]);return $=function(){return e},e}var ee=p.a.div($()),ne=Object(p.a)(f.a)(Z()),te=function(e){function n(){return Object(o.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.createElement("div",null,r.createElement(h.a,null,r.createElement(r.Fragment,null,r.createElement(ee,null,r.createElement(ne,{to:"/"},"Game"),r.createElement(ne,{to:"/about"},"Rules")),r.createElement(w.a,null,r.createElement(g.a,{exact:!0,path:"/",component:V}),r.createElement(g.a,{exact:!0,path:"/about",component:Y})))))}}]),n}(r.Component),re=t(17),ae=t(8);function ie(e,n,t){var r=Math.max(t-1,0),a=r+(0===t?2:3),i=0===n?[]:e[n-1].slice(r,a).map(function(e,t){return{cell:e,rowIndex:n-1,cellIndex:r+t}}),l=0===t?[]:[{cell:e[n][t-1],rowIndex:n,cellIndex:t-1}],o=t===e[0].length-1?[]:[{cell:e[n][t+1],rowIndex:n,cellIndex:t+1}],c=n===e.length-1?[]:e[n+1].slice(r,a).map(function(e,t){return{cell:e,rowIndex:n+1,cellIndex:r+t}});return i.concat(l,o,c)}function le(e,n,t){for(var r=new Array(t).fill(!0),a=e*n-t,i=new Array(a>=0?a:0).fill(!1),l=r.concat(i).sort(function(){return Math.random()-.5}),o=0,c=new Array(e).fill([]).map(function(e){return new Array(n).fill({isMine:!1,isOpen:!1,isMarked:!1,neighborMines:0}).map(function(e){return Object(ae.a)({},e,{isMine:l[o++]})})}),u=0;u<e;u++)for(var s=0;s<n;s++){if(c[u][s].isMine)ie(c,u,s).filter(function(e){return!e.cell.isMine}).forEach(function(e){e.cell.neighborMines++})}return{rows:c,minesMarked:0,cellsOpened:0,gameState:"new",mines:t}}function oe(e,n,t){if(e[n][t].isOpen)return{opened:0};if(e[n]=e[n].slice(),e[n][t]=Object(ae.a)({},e[n][t],{isOpen:!0}),e[n][t].neighborMines>0)return{opened:1};var r=1,a=ie(e,n,t).filter(function(e){return!e.cell.isMine&&!e.cell.isMarked}),i=!0,l=!1,o=void 0;try{for(var c,u=a[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;r+=oe(e,s.rowIndex,s.cellIndex).opened}}catch(d){l=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}return{opened:r}}var ce=Object(re.b)(function(e,n){if(!e)return le(10,10,10);switch(n.type){case"click":if("game"!==e.gameState&&"new"!==e.gameState)return e;var t=e.rows[n.rowIndex][n.cellIndex];if(t.isOpen||t.isMarked)return e;if(t.isMine)return{rows:e.rows.map(function(e){return e.map(function(e){return Object(ae.a)({},e,{isOpen:!0})})}),minesMarked:0,cellsOpened:e.rows.length*e.rows[0].length,gameState:"over",mines:e.mines};var r=e.cellsOpened,a=e.minesMarked,i="game",l=e.rows.slice();if(!t.isOpen&&0===t.neighborMines){var o=oe(l,n.rowIndex,n.cellIndex).opened;return a===e.mines&&r+o+a===e.rows.length*e.rows[0].length&&(console.log("!!!!!!!!!!!!!victoria!!!!!!!!!!!!!!!!!!"),i="win"),{rows:l,minesMarked:a,cellsOpened:r+o,gameState:i,mines:e.mines}}return l[n.rowIndex]=l[n.rowIndex].slice(),l[n.rowIndex][n.cellIndex]=Object(ae.a)({},t,{isOpen:!0}),r++,a===e.mines&&r+a===e.rows.length*e.rows[0].length&&(console.log("!!!!!!!!!!!!!victoria!!!!!!!!!!!!!!!!!!"),i="win"),{rows:l,minesMarked:a,cellsOpened:r,gameState:i,mines:e.mines};case"rightClick":if("game"!==e.gameState&&"new"!==e.gameState)return e;var c=e.rows[n.rowIndex][n.cellIndex];if(c.isOpen)return e;var u=e.rows.slice(),s=e.minesMarked+(c.isMarked?-1:1);u[n.rowIndex][n.cellIndex]=Object(ae.a)({},c,{isMarked:!c.isMarked});var d="game";return s===e.mines&&e.cellsOpened+s===e.rows.length*e.rows[0].length&&(console.log("!!!!!!!!!!!!!victoria!!!!!!!!!!!!!!!!!!"),d="win"),{rows:u,minesMarked:s,cellsOpened:e.cellsOpened,gameState:d,mines:e.mines};case"doubleClick":if("game"!==e.gameState)return e;var m=e.rows[n.rowIndex][n.cellIndex];if(!m.isOpen||m.isMarked||0===m.neighborMines)return e;var p=e.rows.slice(),f=function e(n,t,r){var a=n[t][r];if(!a.isOpen)return{opened:0};var i=ie(n,t,r);if(i.filter(function(e){return e.cell.isMarked}).length!==a.neighborMines)return{opened:0};var l=i.filter(function(e){return!e.cell.isOpen&&!e.cell.isMarked&&!e.cell.isMine}),o=0,c=[],u=!0,s=!1,d=void 0;try{for(var m,p=l[Symbol.iterator]();!(u=(m=p.next()).done);u=!0){var f=m.value;n[f.rowIndex][f.cellIndex].isOpen||(0===f.cell.neighborMines?o+=oe(n,f.rowIndex,f.cellIndex).opened:(n[f.rowIndex]=n[f.rowIndex].slice(),n[f.rowIndex][f.cellIndex]=Object(ae.a)({},f.cell,{isOpen:!0}),o++,c.push(f)))}}catch(v){s=!0,d=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}for(var h=0,w=c;h<w.length;h++){var g=w[h];o+=e(n,g.rowIndex,g.cellIndex).opened}return{opened:o}}(p,n.rowIndex,n.cellIndex).opened;if(0===f)return e;var h="game";return e.minesMarked===e.mines&&e.cellsOpened+f+e.minesMarked===e.rows.length*e.rows[0].length&&(console.log("!!!!!!!!!!!!!victoria!!!!!!!!!!!!!!!!!! 111"),h="win"),{rows:p,minesMarked:e.minesMarked,cellsOpened:e.cellsOpened+f,gameState:h,mines:e.mines};case"reset":return le(n.rows,n.columns,n.mines);case"newGame":return le(e.rows.length,e.rows[0].length,e.mines);default:return e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.render(r.createElement(l.a,null,r.createElement(i.a,{store:ce},r.createElement(te,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.ece35a13.chunk.js.map